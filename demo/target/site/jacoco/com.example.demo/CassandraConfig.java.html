<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CassandraConfig.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">demo</a> &gt; <a href="index.source.html" class="el_package">com.example.demo</a> &gt; <span class="el_source">CassandraConfig.java</span></div><h1>CassandraConfig.java</h1><pre class="source lang-java linenums">package com.example.demo;

import java.io.IOException;
import java.io.InputStream;
import java.security.KeyManagementException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.CertificateException;

import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
/*import org.springframework.data.cassandra.core.CassandraOperations;
import org.springframework.data.cassandra.core.CassandraTemplate;


import com.datastax.driver.core.Cluster;
import com.datastax.driver.core.ConsistencyLevel;
import com.datastax.driver.core.JdkSSLOptions;
import com.datastax.driver.core.QueryOptions;
import com.datastax.driver.core.Session;
import com.datastax.driver.core.policies.DCAwareRoundRobinPolicy;
import com.datastax.driver.core.policies.TokenAwarePolicy;
import com.datastax.driver.dse.auth.DsePlainTextAuthProvider;*/

@Configuration
<span class="fc" id="L34">public class CassandraConfig {</span>

	/*
	 * 
	 * private static final Logger LOGGER =
	 * LoggerFactory.getLogger(CassandraConfig.class);
	 * 
	 * @Value(&quot;${db.contactpoints.list}&quot;) private String[] contactpoints;
	 * 
	 * @Value(&quot;${db.keyspace}&quot;) private String keySpace;
	 * 
	 * @Value(&quot;${db.username}&quot;) private String username;
	 * 
	 * @Value(&quot;${db.password}&quot;) private String password;
	 * 
	 * @Value(&quot;${db.region}&quot;) private String dbRegion;
	 * 
	 * @Value(&quot;${db.port}&quot;) private String port;
	 * 
	 * @Value(&quot;${keystore.file}&quot;) private String keyStore;
	 * 
	 * @Value(&quot;${keystore.pw}&quot;) private String keyStorePw;
	 * 
	 * @Value(&quot;${db.datacenter.local}&quot;) private String localDataCenter;
	 * 
	 * @Value(&quot;${apiRetryMaxCount}&quot;) private int retryMaxCount;
	 * 
	 * @Value(&quot;${apiRetrySleepTime}&quot;) private int retrySleepTime;
	 * 
	 * private Session session = null;
	 * 
	 * @Bean public CassandraOperations cassandraTemplate() throws ListenerException
	 * { if(session == null) { Cluster cluster =
	 * getCluster(keyStore,keyStorePw,contactpoints); session =
	 * cluster.connect(keySpace); } if(session != null) { return new
	 * CassandraTemplate(session) ; } return null; }
	 * 
	 * 
	 *//*************************************************************************
		 *
		 * Connects to Cassandra database. If there is already a cluster and a session
		 * then just reuse them.
		 * 
		 * @param
		 * @return void
		 * @throws Exception
		 * 
		 *************************************************************************/
	/*
	 * @SuppressWarnings(&quot;deprecation&quot;) private Cluster getCluster(String
	 * trustStoreLocation, String trustStorePassword, String[] host) throws
	 * ListenerException { Cluster cluster = null; SSLContext sslcontext = null;
	 * String exceptionMessage = &quot;Exception connecting to Cassandra:&quot;;
	 * 
	 * try { InputStream inputStream =
	 * getClass().getClassLoader().getResourceAsStream(trustStoreLocation); KeyStore
	 * keystore = KeyStore.getInstance(&quot;jks&quot;);
	 * 
	 * keystore.load(inputStream, trustStorePassword.toCharArray());
	 * 
	 * TrustManagerFactory tmf =
	 * TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
	 * tmf.init(keystore); TrustManager[] tm = tmf.getTrustManagers();
	 * 
	 * sslcontext = SSLContext.getInstance(&quot;TLS&quot;); sslcontext.init(null, tm, null);
	 * 
	 * JdkSSLOptions sslOptions =
	 * JdkSSLOptions.builder().withSSLContext(sslcontext).build();
	 * 
	 * cluster =
	 * Cluster.builder().addContactPoints(host).withSSL(sslOptions).withPort(Integer
	 * .parseInt(port)) .withAuthProvider(new DsePlainTextAuthProvider(username,
	 * password)) .withQueryOptions(new
	 * QueryOptions().setConsistencyLevel(ConsistencyLevel.ONE))
	 * .withLoadBalancingPolicy(new
	 * TokenAwarePolicy(DCAwareRoundRobinPolicy.builder().withLocalDc(
	 * localDataCenter) .withUsedHostsPerRemoteDc(ListenerConstants.HOST_VALUE).
	 * allowRemoteDCsForLocalConsistencyLevel().build())).build(); } catch
	 * (KeyStoreException keyStoreException) {
	 * LOGGER.error(exceptionMessage,keyStoreException.getMessage()); throw new
	 * ListenerException(exceptionMessage,keyStoreException); } catch
	 * (NoSuchAlgorithmException e) { LOGGER.error(exceptionMessage,e.getMessage());
	 * throw new ListenerException(exceptionMessage,e); } catch
	 * (CertificateException e) { LOGGER.error(exceptionMessage,e.getMessage());
	 * throw new ListenerException(exceptionMessage,e); } catch (IOException e) {
	 * LOGGER.error(exceptionMessage,e.getMessage()); throw new
	 * ListenerException(exceptionMessage,e); } catch (KeyManagementException e) {
	 * LOGGER.error(exceptionMessage,e.getMessage()); throw new
	 * ListenerException(exceptionMessage,e); } return cluster; }
	 */}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>